define(["require","exports","./sectionbuilder"],function(n,t,i){"use strict";function c(n){var t=parseInt(n.attr("id").match(/\d*$/)[0]),i,u,f;t>0&&t<r.content.length&&(i=$("#Content"+t),u=$("#Content"+(t-1)),i.after(u),i.attr("id","Content"+(t-1)),u.attr("id","Content"+t),f=r.content[t],r.content[t]=r.content[t-1],r.content[t-1]=f)}function l(n){var t=parseInt(n.attr("id").match(/\d*$/)[0]),i,u,f;t>=0&&t<r.content.length-1&&(i=$("#Content"+t),u=$("#Content"+(t+1)),i.before(u),i.attr("id","Content"+(t+1)),u.attr("id","Content"+t),f=r.content[t],r.content[t]=r.content[t+1],r.content[t+1]=f)}function u(n,t,i){var r=$(t);return r.attr("id","Content"+n),r.find("#up").click(function(){c(r)}),r.find("#down").click(function(){l(r)}),i.append(r),r}function a(n,t){var i=n.find("code").first();return i.attr("class",t.type),i.html(p(t.text)),n}function v(n,t){return n.find("p").first().text(t.text).text(t.text),n}function y(n,t){return n.find("div").first().html(t.text),n}function f(n,t){var i=n.find("img").first();return i.attr("src",t.path),i.attr("alt",t.alt),n}t.__esModule=!0;var e,o,s,h,r,p=function(n){return n=n.replace(/</g,"&lt;"),n.replace(/>/g,"&gt;")};t.create=function(n){var u,f,e,t;switch(n){case"text":u=new i.TextContent;u.text="text";r.content.push(u);break;case"code":f=new i.CodeContent;f.text="<p>code<\/p>";r.content.push(f);break;case"sample":e=new i.ExampleContent;e.text="<p>code example<\/p>";r.content.push(e);break;case"img":t=new i.ImageContent;t.path="file://D:/Pictures/Texturen/bee.jpg";t.alt="missing image!";r.content.push(t)}};t.init=function(n){var t,u,f,c;r=i.SectionBuilder.fromJS(n);t=new i.TextContent;e=$("."+t.constructor.name)[0].innerHTML;u=new i.CodeContent;o=$("."+u.constructor.name)[0].innerHTML;f=new i.ExampleContent;s=$("."+f.constructor.name)[0].innerHTML;c=new i.ImageContent;h=$("."+c.constructor.name)[0].innerHTML};t.up=c;t.down=l;t.draw=function(){var n=function(n){var p=$("#col"),r,l;for(p.length==0&&(p=$('<div class="col" id="col"><\/div>')),$("#container").append(p),r=0;r<n.length;r++){var t=n[r],c="Content"+r,w=$("#"+c);w.length==0?t instanceof i.ExampleContent?(l=u(r,s,p),y(l,t,c)):t instanceof i.CodeContent?(l=u(r,o,p),a(l,t,c)):t instanceof i.TextContent?(l=u(r,e,p),v(l,t,c)):t instanceof i.ImageContent&&(l=u(r,h,p),f(l,t,c)):t instanceof i.ExampleContent?y(w,t,c):t instanceof i.CodeContent?a(w,t,c):t instanceof i.TextContent?v(w,t,c):t instanceof i.ImageContent&&f(w,t,c)}};n(r.content)};f});